<div class="room-main">
	<aside class="room-aside">
		<div class="chat-room-item" *ngFor="let item of [1, 2, 3, 4]" [routerLink]="['/', item]">
			<div class="chat-room-user-avatar">
				<span class="indicator"></span>
				<img src="https://cdn-icons-png.flaticon.com/256/3135/3135789.png" alt="avatar" />
			</div>
			<div class="chat-room-data">
				<div class="chat-room-title">
					<h4 class="chat-room-username">Lebogang Flavien</h4>
					<span class="chat-room-time">{{ item + "h" }}</span>
				</div>
				<div class="chat-room-info">
					<p class="chat-room-message">
						These sequences often show a strong correlation between consecutive or nearby tokens.
					</p>
					<span class="chat-room-badge">{{ item }}</span>
				</div>
			</div>
		</div>
	</aside>
	<section class="room-section">
		<header class="room-header">
			@if (receiver) {
				<div class="chat-room-header-info">
					<a routerLink="/" class="chat-room-back">
						<fa-icon [icon]="faArrowLeft"></fa-icon>
					</a>
					<div class="chat-room-user-avatar">
						@if (receiver.avatar) {
							<img [src]="receiver.avatar" alt="avatar" />
						} @else {
							<img src="https://cdn-icons-png.flaticon.com/256/3135/3135789.png" alt="avatar" />
						}
					</div>
					<div class="chat-room-title">
						<h4 class="chat-room-username">{{ receiver.firstName }} {{ receiver.lastName }}</h4>
						<span class="chat-room-indicator">
							@if (receiver.isOnline) {
								Online
								<span class="indicator"></span>
							} @else {
								Offline
							}
						</span>
					</div>
				</div>
			}
			<div class="chat-room-options-container">
				<button class="chat-room-options">
					<fa-icon [icon]="faEllipsisVertical"></fa-icon>
				</button>
				<ul class="chat-room-list-options">
					<li>Profile</li>
					<li>Delete</li>
					<li>Block</li>
				</ul>
			</div>
		</header>
		<div class="room-container">
			@for (msg of messages; track msg.id; let item = $index) {
				<div class="room-item" [ngClass]="{ owner: msg.user?.id === currentUser.id }">
					<div class="room-user">
						@if (msg.user?.avatar) {
							<img [src]="msg.user.avatar" alt="avatar" />
						} @else {
							{{ msg.user.firstName?.charAt(0) }}{{ msg.user.lastName?.charAt(0) }}
						}
					</div>
					<div class="room-info">
						<span class="room-user-name">{{
							msg.user?.id === currentUser.id ? "You" : msg.user.firstName + " " + msg.user.lastName
						}}</span>
						<div class="room-message">
							<p class="text">
								{{ msg.text }}
							</p>
							<span class="time">{{ msg.createdAt | date: "HH:ss" }}</span>
						</div>
					</div>
				</div>
			} @empty {
				<p>There are no messages yet...</p>
			}
		</div>
		<footer class="room-footer">
			<div class="">
				<textarea
					class="chat-textarea"
					placeholder="Type message"
					(keydown.enter)="saveMessage($event)"
				></textarea>
			</div>
		</footer>
	</section>
</div>
